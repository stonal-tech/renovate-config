{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "github>stonal-tech/renovate-config//global",
    "github>stonal-tech/renovate-config//java-mvn"
  ],
  "packageRules": [
    {
      "description": "All patches are automatically approved and merged",
      "matchManagers": [
        "maven"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "addLabels": [
        "autoapprove"
      ],
      "prPriority": 2
    },
    {
      "description": "Stonal deps have a higher priority",
      "matchManagers": [
        "maven"
      ],
      "matchPackagePatterns": [
        "^com\\.stonal.*$",
        "^com\\.(la)?foncierenumerique.*$"
      ],
      "prPriority": 5
    },
    {
      "description": "Auto-approving (and merging) minor and patch updates for Stonal deps",
      "matchManagers": [
        "maven"
      ],
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "matchPackagePatterns": [
        "^com\\.stonal.*$",
        "^io\\.stonal.*$",
        "^com\\.(la)?foncierenumerique.*$"
      ],
      "addLabels": [
        "autoapprove"
      ]
    },
    {
      "description": "Auto creating releases for patch updates of Stonal deps",
      "matchManagers": [
        "maven"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "matchPackagePatterns": [
        "^com\\.stonal.*$",
        "^io\\.stonal.*$",
        "^com\\.(la)?foncierenumerique.*$"
      ],
      "addLabels": [
        "autorelease"
      ]
    },
    {
      "description": "Automerging some majors",
      "matchManagers": [
        "maven"
      ],
      "matchUpdateTypes": [
        "major",
        "minor"
      ],
      "matchPackagePatterns": [
        "^com\\.google\\.guava:",
        "^org\\.testcontainers:",
        "^org\\.mock-server:",
        "^org\\.mockito:"
      ],
      "addLabels": [
        "autoapprove"
      ]
    },
    {
      "description": "Automerging some minors",
      "matchManagers": [
        "maven"
      ],
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "matchPackagePatterns": [
        "^ch\\.qos\\.logback:",
        "^com\\.github.dasniko:testcontainers-keycloak$",
        "^com\\.google\\.code\\.gson:",
        "^com\\.tngtech\\.jgiven:",
        "^commons-codec:",
        "^commons-io:",
        "^io\\.mockk:",
        "^io\\.sentry:",
        "^net\\.lbruunâ€¢\\.springboot:preliquibase-spring-boot-starter$",
        "^net\\.sourceforge\\.htmlunit:",
        "^org\\.apache\\.commons:",
        "^org\\.apache\\.cxf:",
        "^org\\.apache.maven.plugins:",
        "^org\\.apache\\.xmlgraphics:",
        "^org\\.jetbrains\\.kotlin:",
        "^org\\.junit\\.jupiter:",
        "^org\\.jsoup:",
        "^org\\.liquibase:",
        "^org\\.owasp:",
        "^org\\.slf4j:",
        "^org\\.springframework\\.boot:",
        "^org\\.springframework\\.cloud:",
        "^software.amazon.awssdk:"
      ],
      "addLabels": [
        "autoapprove"
      ]
    },
    {
      "description": "Avro: Keep old version (until kafka is removed)",
      "matchPackagePatterns": [
        "org\\.apache\\.avro:avro-maven-plugin"
      ],
      "allowedVersions": "<1.9"
    },
    {
      "description": "Kafka/Avro: Keep old version (and drop it once kafka is removed)",
      "matchPackagePatterns": [
        "io\\.confluent:kafka-avro-serializer"
      ],
      "allowedVersions": "<=3.3.1"
    },
    {
      "description": "Avro deps are broken",
      "matchPackagePatterns": [
        "io\\.confluent:kafka-avro-serializer"
      ],
      "labels": [
        "bad-semver"
      ]
    },
    {
      "groupName": "slf4j",
      "description": "Grouping all SLF4J deps / https://teams.microsoft.com/l/message/19:f81f757045044e7790a2fe4f8e36bdaa@thread.tacv2/1694159660533?tenantId=2cfaefd8-9855-4a51-a490-80bf898a8ac0&groupId=d7f9b385-5908-4f96-b0c5-716637c0acca&parentMessageId=1694159660533&teamName=R%26D&channelName=Tech&createdTime=1694159660533&allowXTenantAccess=false",
      "matchPackagePatterns": [
        "^org\\.slf4j:.*"
      ]
    },
    {
      "groupName": "springframework",
      "description": "Grouping all springframework deps",
      "matchPackagePatterns": [
        "^org\\.springframework\\..*"
      ]
    },
    {
      "description": "group keycloack updates",
      "groupName": "lib-keycloak",
      "matchDepNames": [
        "^org\\.keycloak\\.:"
      ],
      "matchManagers": [
        "maven"
      ],
      "separateMajorMinor": false
    }
  ]
}
